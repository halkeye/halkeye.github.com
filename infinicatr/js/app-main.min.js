/*! infinicatr - v0.0.1 - 2013-01-27
* Copyright (c) 2013 ; Licensed  */
jQuery(document).ready(function(){"use strict";var e=jQuery("#catCarousel .carousel-inner"),t=jQuery("#loading_flickr_indicator").hide(),n={key:"850775ffc1d6d95478d78bee0fdf4971"},r={};r.pending_message="Please wait. Fetching more content",r.page_size=10,r.pending_photos_threshold=Math.floor(r.page_size*1/3),r.max_photos=r.page_size*3;var i=1,s=0,o=function(o){if(s)return;t.show(),s=1,$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+n.key+"&tags=cats&format=json&per_page="+r.page_size+"&jsoncallback=?&page="+i,function(n){s=0,t.hide(),i=n.photos.page%n.photos.pages+1,jQuery.each(n.photos.photo,function(t,n){var r="http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_z.jpg".replace("{id}",n.id).replace("{server-id}",n.server).replace("{secret}",n.secret).replace("{farm-id}",n.farm),i=jQuery("<div>").attr("id","flickr_photo_"+n.id).addClass("item").appendTo(e),s=jQuery("<img>").attr("src",r).appendTo(i)}),e.find(".active").length===0&&e.children().eq(0).addClass("active");if(e.children().length>r.max_photos){var u=e.children().length-r.max_photos;e.children().filter(":not(.active):lt("+u+")").remove()}o&&o()})};o(function(){});var u=function(t,n,i,o){if(n==="left")e.carousel("prev");else{if(n!=="right")return;s?alert(r.pending_message):e.carousel("next")}};jQuery("#catCarousel").swipe({swipe:u,threshold:0,fingers:"all"}),jQuery("#catCarousel-prev").bind("click",function(t){e.carousel("prev"),t.preventDefault()}),jQuery("#catCarousel-next").bind("click",function(t){s?alert(r.pending_message):e.carousel("next"),t.preventDefault()}),e.on("slide",function(t){var n=jQuery(this),i=n.find(".item.active"),s=e.children().index(i);s>e.children().length-r.pending_photos_threshold&&o()}),e.carousel()});